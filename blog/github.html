<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>部署Github Pages的记录 |  JanssenZhang的博客</title>
    <meta name="description" content="欢迎来访">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.baa6115b.css" as="style"><link rel="preload" href="/assets/js/app.e35ede75.js" as="script"><link rel="preload" href="/assets/js/2.963b22ae.js" as="script"><link rel="preload" href="/assets/js/10.63cb75ca.js" as="script"><link rel="prefetch" href="/assets/js/11.c0311efe.js"><link rel="prefetch" href="/assets/js/12.d21f5b73.js"><link rel="prefetch" href="/assets/js/13.5f1b3c9e.js"><link rel="prefetch" href="/assets/js/14.8c5d6632.js"><link rel="prefetch" href="/assets/js/15.7f4aad75.js"><link rel="prefetch" href="/assets/js/16.b4ce7e39.js"><link rel="prefetch" href="/assets/js/17.b95b3bcf.js"><link rel="prefetch" href="/assets/js/3.454d0a9d.js"><link rel="prefetch" href="/assets/js/4.f8e9211f.js"><link rel="prefetch" href="/assets/js/5.59c456e0.js"><link rel="prefetch" href="/assets/js/6.6e44e2ea.js"><link rel="prefetch" href="/assets/js/7.acb9b6c9.js"><link rel="prefetch" href="/assets/js/8.1a862a97.js"><link rel="prefetch" href="/assets/js/9.7b1b45b8.js">
    <link rel="stylesheet" href="/assets/css/0.styles.baa6115b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name"> JanssenZhang的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/apple/" class="nav-link">测试</a></div> <a href="https://github.com/JanssenZhang/JayBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/apple/" class="nav-link">测试</a></div> <a href="https://github.com/JanssenZhang/JayBlog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>PHP</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/php-basis.html" class="sidebar-link">基础语法</a></li><li><a href="/blog/php-oop.html" class="sidebar-link">面向对象</a></li><li><a href="/blog/php-function.html" class="sidebar-link">可用函数</a></li><li><a href="/blog/php-mysql.html" class="sidebar-link">mysql</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>部署相关</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/github.html" class="active sidebar-link">部署Github Pages的记录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/github.html#github-pages" class="sidebar-link">Github Pages</a></li><li class="sidebar-sub-header"><a href="/blog/github.html#travis-ci" class="sidebar-link">Travis CI</a></li><li class="sidebar-sub-header"><a href="/blog/github.html#部署步骤" class="sidebar-link">部署步骤</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/python-basic.html" class="sidebar-link">python</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/pwa.html" class="sidebar-link">构建PWA应用</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="部署github-pages的记录"><a href="#部署github-pages的记录" aria-hidden="true" class="header-anchor">#</a> 部署Github Pages的记录</h1> <p>Github Pages 不能运行动态程序，只能输出一些静态内容。因此 Github Pages 非常适合用于前端项目的展示。可用于存放项目介绍、项目文档或者个人博客。本文介绍了怎么用 Travis CI 自动化部署 Github Pages。</p> <h2 id="github-pages"><a href="#github-pages" aria-hidden="true" class="header-anchor">#</a> Github Pages</h2> <p><img src="/1567068170917.jpg" alt="Github Pages"><br></p> <p>是GitHub为每一位Gitgay提供的静态页面服务，<a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>官网</p> <ul><li>每个账号有一个顶级的域名 <code>&lt;username&gt;.github.io</code> <ul><li>顶级域名的部署需要创建一个<code>&lt;username&gt;.github.io</code>这个名字的仓库</li></ul></li> <li>每个仓库有一个仓库名对应的 <code>&lt;username&gt;.github.io/&lt;repoName&gt;/</code> <ul><li>默认不启用GitHub Pages，在仓库setting中设置</li></ul></li></ul> <h2 id="travis-ci"><a href="#travis-ci" aria-hidden="true" class="header-anchor">#</a> Travis CI</h2> <p><img src="/TravisCI.png" alt="Travis CI"><br> <a href="https://travis-ci.com" target="_blank" rel="noopener noreferrer">Travis CI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 提供的是持续集成服务（Continuous Integration，简称 CI）。它绑定 Github 上面的项目，只要有新的代码，就会自动抓取。然后，提供一个运行环境，执行测试，完成构建，还能部署到服务器。</p> <p>持续集成指的是只要代码有变更，就自动运行构建和测试，反馈运行结果。确保符合预期以后，再将新代码&quot;集成&quot;到主干。</p> <p>持续集成的好处在于，每次代码的小幅变更，就能看到运行结果，从而不断累积小的变更，而不是在开发周期结束时，一下子合并一大块代码。</p> <h2 id="部署步骤"><a href="#部署步骤" aria-hidden="true" class="header-anchor">#</a> 部署步骤</h2> <h3 id="_1-安装-github-app"><a href="#_1-安装-github-app" aria-hidden="true" class="header-anchor">#</a> 1.安装 GitHub App</h3> <p>在 <a href="https://github.com/marketplace" target="_blank" rel="noopener noreferrer">Github Market Place<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>安装 Travis CI。配置项目权限。<br>
当然你也可以在安装完之后再配置，在 GitHub个人账户&gt;setting&gt;Applications 下找到 Travis CI,</p> <h3 id="_2-配置github-token"><a href="#_2-配置github-token" aria-hidden="true" class="header-anchor">#</a> 2.配置GitHub Token</h3> <p>在  GitHub 的 Developer settings<br>
token的权限后期可以修改</p> <p><img src="/1567063318001.jpg"><br></p> <div class="warning custom-block"><p>生成token后不要直接刷新，先复制token，因为他只出现这一次</p></div> <h3 id="_3-增加-travis-yml-文件"><a href="#_3-增加-travis-yml-文件" aria-hidden="true" class="header-anchor">#</a> 3.增加 .travis.yml 文件</h3> <p>在你GitHub项目对应的本地的根目录下新建 .travis.yml</p> <h3 id="_4-加密github-token"><a href="#_4-加密github-token" aria-hidden="true" class="header-anchor">#</a> 4.加密GitHub Token</h3> <p>准备travis客户端</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>gem <span class="token function">install</span> travis  <span class="token comment"># 安装 travis 客户端</span>
travis login --pro  <span class="token comment"># 登录GitHub账号</span>
travis encrypt <span class="token assign-left variable">GITHUB_TOKEN</span><span class="token operator">=</span><span class="token operator">&lt;</span>YOUR_GITHUB_TOKEN<span class="token operator">&gt;</span> --add  <span class="token comment"># 生成加密token，-add 自动添加到.travis.yml，因为他不会自动生成所以前面我们先添加了.travis.yml这个文件</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-详细配置-travis-yml"><a href="#_5-详细配置-travis-yml" aria-hidden="true" class="header-anchor">#</a> 5.详细配置 .travis.yml</h3> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">sudo</span><span class="token punctuation">:</span> required
<span class="token key atrule">language</span><span class="token punctuation">:</span> node_js  <span class="token comment"># 指定运行环境</span>
<span class="token key atrule">node_js</span><span class="token punctuation">:</span>  
<span class="token punctuation">-</span> <span class="token string">'10'</span>  <span class="token comment"># node版本</span>
<span class="token key atrule">before_install</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> yarn  <span class="token comment"># 执行安装依赖</span>
<span class="token key atrule">script</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> yarn build  <span class="token comment"># 执行打包</span>
<span class="token key atrule">env</span><span class="token punctuation">:</span>
  <span class="token key atrule">global</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">secure</span><span class="token punctuation">:</span> <span class="token string">'生成的加密串'</span> <span class="token comment"># 生成的加密串</span>
<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">provider</span><span class="token punctuation">:</span> pages <span class="token comment"># 解析支持者为GitHub Pages</span>
  <span class="token key atrule">skip-cleanup</span><span class="token punctuation">:</span> <span class="token boolean important">true  </span><span class="token comment"># 必须打开，防止构建时仓库变动引起误删除</span>
  <span class="token key atrule">keep-history</span><span class="token punctuation">:</span> <span class="token boolean important">true  </span><span class="token comment"># 禁止travis对你的GitHub项目进行强制推送</span>
  <span class="token key atrule">target-branch</span><span class="token punctuation">:</span> master <span class="token comment"># 打完包要推送的仓库的分支</span>
  <span class="token key atrule">github-token</span><span class="token punctuation">:</span> $GITHUB_TOKEN <span class="token comment"># 加密时对应的token变量</span>
  <span class="token key atrule">local-dir</span><span class="token punctuation">:</span> /dist <span class="token comment"># travis 打完包推送到GitHub的目录</span>
  <span class="token key atrule">repo</span><span class="token punctuation">:</span> &lt;username<span class="token punctuation">&gt;</span>/&lt;username<span class="token punctuation">&gt;</span>.github.io <span class="token comment"># 要推送的目标仓库，默认是本仓库</span>
  <span class="token key atrule">on</span><span class="token punctuation">:</span>
    <span class="token key atrule">branch</span><span class="token punctuation">:</span> master  <span class="token comment"># local-dir 所在的分支</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="tip custom-block"><p>关于deploy官网解释 <a href="https://docs.travis-ci.com/user/deployment/pages/" target="_blank" rel="noopener noreferrer">部署GitHub Pages<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h3 id="_6-其他"><a href="#_6-其他" aria-hidden="true" class="header-anchor">#</a> 6.其他</h3> <p>除此之外，你还可以在GitHub对应项目的设置里面travis配置hook和<a href="https://travis-ci.com" target="_blank" rel="noopener noreferrer">Travis CI<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>官网进行其他的配置，其实默认配置基本就可以，除了权限以外。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/JanssenZhang/JayBlog/edit/master/docs/blog/github.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/29/2019, 10:22:49 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/php-mysql.html" class="prev">mysql</a></span> <span class="next"><a href="/blog/python-basic.html">python</a>→
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.e35ede75.js" defer></script><script src="/assets/js/2.963b22ae.js" defer></script><script src="/assets/js/10.63cb75ca.js" defer></script>
  </body>
</html>
